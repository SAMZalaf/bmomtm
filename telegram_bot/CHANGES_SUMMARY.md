# ููุฎุต ุงูุชุบููุฑุงุช - SMSPool Service

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทุจูู ุฌููุน ุงูุชุญุณููุงุช ูุงูุฅุตูุงุญุงุช ุงููุทููุจุฉ ุนูู ุฎุฏูุฉ SMSPool ูู ุงูุจูุช.

---

## โ ุงูููุงู ุงูููุฌุฒุฉ

### 1. ูู ุถุบุท ุงูููู โ
- ุชู ูู ุถุบุท `telegram_bot (2) (1).zip` ุจูุฌุงุญ
- ุชุญุฏูุซ ุฌููุน ูููุงุช ุงููุดุฑูุน

### 2. ุฅุตูุงุญ ุดุฑุงุก ุฑูู SMSPool โ
- ุฅุถุงูุฉ ุฏุงูุฉ `process_rent_purchase()` ูุดุฑุงุก ุฃุฑูุงู ุงูุฅูุฌุงุฑ
- ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุนูููุฉ ุงูุดุฑุงุก
- ุฏุนู ูุงูู ูููุนู ุงูุฃุฑูุงู (ูุคูุช ูุฅูุฌุงุฑ)

### 3. ุงุฎุชูุงุฑ ููุน ุงูุฑูู (ูุคูุช ุฃู ุฅูุฌุงุฑ) โ
**ุงูุชุฏูู ุงูุฌุฏูุฏ:**
```
1. ุฒุฑ "ุดุฑุงุก ุฑูู"
   โ
2. ุงุฎุชูุงุฑ ุงูููุน:
   - ๐ข ุฑูู ููุฑุฉ ูุงุญุฏุฉ (Temp) โ ูุจุงุดุฑุฉ ุฅูู ุงุฎุชูุงุฑ ุงูุฏููุฉ
   - ๐ ุฅูุฌุงุฑ ุฑูู (Rent) โ ุงุฎุชูุงุฑ ุงููุฏุฉ ุฃููุงู (1ุ 3ุ 7ุ 30 ููู)
   โ
3. ุงูุจุญุซ ุนู ุงูุฏููุฉ (Inline Query)
   โ
4. ุงุฎุชูุงุฑ ุงูุฏููุฉ
   โ
5. ุงูุจุญุซ ุนู ุงูุฎุฏูุฉ (Inline Query) - ูุตูุงุฉ ุญุณุจ ุงูุฏููุฉ ูููุน ุงูุฑูู
   โ
6. ุชุฃููุฏ ุงูุดุฑุงุก
   โ
7. ุงุณุชูุงู ุงูุฑูู
```

### 4. ุงุฎุชูุงุฑ ุงูุฏูู ูู Inline Query โ
**ุงููููุฒุงุช:**
- โ ุฌูุจ ุงูุฏูู ุงูุญููููุฉ ูู SMSPool API
- โ ุงูุจุญุซ ูุจุฏุฃ ูู ุฃูู ุญุฑู (startswith)
- โ ุงูุจุญุซ ูู ุงุณู ุงูุฏููุฉ ูุงูููุฏ (US, GB, ุฅูุฎ)
- โ ุนุฑุถ ุงูุฏูู ุงูุดุงุฆุนุฉ ุฃููุงู:
  ```
  US ๐บ๐ธ, GB ๐ฌ๐ง, CA ๐จ๐ฆ, DE ๐ฉ๐ช, FR ๐ซ๐ท
  NL ๐ณ๐ฑ, RU ๐ท๐บ, IN ๐ฎ๐ณ, PH ๐ต๐ญ, ID ๐ฎ๐ฉ
  ```
- โ ุนุฑุถ ุนูู ุงูุฏููุฉ ๐ฉ ูุน ูู ูุชูุฌุฉ

**ูุซุงู ุงูุจุญุซ:**
```
ุงููุณุชุฎุฏู ููุชุจ: "us"
ุงููุชุงุฆุฌ: 
  ๐บ๐ธ United States
  ๐ฆ๐บ Australia
  ๐ฆ๐น Austria
```

### 5. ุนุฑุถ ุงูุฎุฏูุงุช ุงููุชููุฑุฉ ุญุณุจ ุงูุฏููุฉ โ
**ุงููููุฒุงุช:**
- โ ุงูุชุตููุฉ ุญุณุจ ุงูุฏููุฉ ุงููุฎุชุงุฑุฉ
- โ ุงูุชุตููุฉ ุญุณุจ ููุน ุงูุฑูู (temp/rent)
- โ ุนุฑุถ ุงูุณุนุฑ ุงูุญูููู ูู API + ูุงูุด ุงูุฑุจุญ
- โ ุชุฑุชูุจ ุงูุฎุฏูุงุช: ุงูุดุงุฆุนุฉ ุฃููุงู
  ```
  ๐ WhatsApp, โ๏ธ Telegram, ๐ Google
  ๐ Facebook, ๐ท Instagram, ๐ฆ Twitter
  ```
- โ Pagination ููุฎุฏูุงุช (15 ุฎุฏูุฉ ููู ุตูุญุฉ)

**ูุธุงู ุงูุชุณุนูุฑ:**
```
ุงูุณุนุฑ ุงูููุงุฆู = ุณุนุฑ API ร (1 + ูุงูุด ุงูุฑุจุญ / 100)

ูุซุงู:
ุณุนุฑ API = $0.50
ูุงูุด ุงูุฑุจุญ = 30%
ุงูุณุนุฑ ุงูููุงุฆู = $0.50 ร 1.30 = $0.65
```

### 6. ุชุญุฏูุซ ุงูุชุณููุงุช โ
**ุงูุณูุฑูุฑุงุช:**
- **ุงูุณูุฑูุฑ 1 (US Only)**: `ุณูุฑฺคุฑ US only (1)`
- **ุงูุณูุฑูุฑ 2 (SMSPool)**: `Server 2 ๐`

**ุงูุนุฑุถ ุงููุนูู:**
```
๐ฑ ุณูุฑฺคุฑ US only (1) | Server 2 ๐
```

### 7. ุฏุนู ุงููุบุชูู (ุนุฑุจู/ุฅูุฌููุฒู) โ
**ุฌููุน ุงูุนูุงุตุฑ ูุชุฑุฌูุฉ:**
- โ ุงูููุงุฆู ูุงูุฃุฒุฑุงุฑ
- โ ุฑุณุงุฆู ุงููุฌุงุญ ูุงูุฃุฎุทุงุก
- โ ุฑุณุงุฆู ุงูุชุฃููุฏ
- โ ุฅุนุฏุงุฏุงุช ุงูุขุฏูู
- โ ูุชุงุฆุฌ Inline Query

---

## ๐ง ุฅุตูุงุญุงุช ุงูุขุฏูู

### ุงููุดุงูู ุงูุชู ุชู ุญููุง:

#### 1. โ ุฒุฑ ุชุบููุฑ ุงูุชููู ูุง ูุนูู โ โ ุชู ุงูุฅุตูุงุญ
**ุงูุญู:**
- ุงููุนุงูุฌ ููุฌูุฏ: `handle_admin_api_key_input()`
- ูุญุชุงุฌ ุฅูู ConversationHandler (state: 100)
- ูุชุญูู ูู ุทูู ุงูููุชุงุญ (32+ ุญุฑู)
- ูุฎุชุจุฑ ุงูููุชุงุญ ูุน API ูุจู ุงูุญูุธ

#### 2. โ ุฒุฑ ุฅููุงู/ุชุดุบูู ูุง ูุนูู โ โ ุชู ุงูุฅุตูุงุญ
**ุงูุญู:**
- ุงููุนุงูุฌ ููุฌูุฏ: `sp_admin_toggle` ูู `handle_smspool_admin_callback()`
- ููุฑุฃ ุงูุญุงูุฉ ุงูุญุงููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุนูุณ ุงูุญุงูุฉ (enabled โ disabled)
- ูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุนูุฏ ุฑุณู ุงููุงุฆูุฉ ูุน ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ

#### 3. โ ุชุบููุฑ ูุงูุด ุงูุฑุจุญ ูุง ูุนูู โ โ ุชู ุงูุฅุตูุงุญ
**ุงูุญู:**
- ุงููุนุงูุฌ ููุฌูุฏ: `handle_admin_margin_input()`
- ูุญุชุงุฌ ุฅูู ConversationHandler (state: 101)
- ููุจู ุงูุฃุฑูุงู ูู 0 ุฅูู 500
- ูุฒูู ุนูุงูุฉ % ุชููุงุฆูุงู
- ูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ ูุงููุถุงูุฉ

### ุงููููุงุช ุงููุนุฏูุฉ:
1. โ `smspool_service.py` - ุงูุฅุตูุงุญุงุช ุงูุฑุฆูุณูุฉ
   - ุฅุถุงูุฉ `process_rent_purchase()` 
   - ุชุญุณูู `handle_smspool_inline_query()`
   - ุชุญุฏูุซ SMSPOOL_MESSAGES
   - ุฅุตูุงุญ ุงูุจุญุซ ูู ุงูุฏูู (startswith)

### ุงููููุงุช ุงููุถุงูุฉ:
1. โ `SMSPOOL_FIXES_README.md` - ุชูุซูู ุดุงูู
2. โ `smspool_integration_example.py` - ูุซุงู ุงูุชูุงูู
3. โ `CHANGES_SUMMARY.md` - ูุฐุง ุงูููู
4. โ `fix_smspool.py` - ุณูุฑูุจุช ุงูุชุทุจูู ุงูุชููุงุฆู
5. โ `smspool_service.py.backup` - ูุณุฎุฉ ุงุญุชูุงุทูุฉ

---

## ๐ ุฎุทูุงุช ุงูุชูุงูู ุงูุณุฑูุนุฉ

### 1. ูู bot.py (ููุนููุงุก):
```python
from smspool_service import (
    handle_smspool_callback,
    handle_smspool_inline_query
)

# ุฅุถุงูุฉ handlers
application.add_handler(CallbackQueryHandler(
    handle_smspool_callback,
    pattern=r'^sp_'
))

application.add_handler(InlineQueryHandler(
    handle_smspool_inline_query
))
```

### 2. ูู bot_admin.py (ููุขุฏูู):
```python
from smspool_service import (
    handle_smspool_admin_callback,
    handle_admin_api_key_input,
    handle_admin_margin_input
)

# ุฅุถุงูุฉ ConversationHandler
from telegram.ext import ConversationHandler, MessageHandler, filters

SMSPOOL_SET_KEY = 100
SMSPOOL_SET_MARGIN = 101

smspool_admin_conv = ConversationHandler(
    entry_points=[
        CallbackQueryHandler(handle_smspool_admin_callback, pattern=r'^sp_admin_')
    ],
    states={
        SMSPOOL_SET_KEY: [
            MessageHandler(filters.TEXT & ~filters.COMMAND, handle_admin_api_key_input)
        ],
        SMSPOOL_SET_MARGIN: [
            MessageHandler(filters.TEXT & ~filters.COMMAND, handle_admin_margin_input)
        ],
    },
    fallbacks=[
        CallbackQueryHandler(handle_smspool_admin_callback, pattern=r'^sp_admin_menu$')
    ],
    allow_reentry=True,
    conversation_timeout=180
)

application.add_handler(smspool_admin_conv)
```

### 3. ุฅุถุงูุฉ ุงูุฃุฒุฑุงุฑ:
```python
# ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ (ููุนููุงุก)
keyboard.append([
    InlineKeyboardButton(
        "๐ฑ ุณูุฑฺคุฑ US only (1) | Server 2 ๐",
        callback_data="sp_main"
    )
])

# ูู ูุงุฆูุฉ ุงูุขุฏูู
keyboard.append([
    InlineKeyboardButton(
        "๐ฑ ุฅุฏุงุฑุฉ SMSPool",
        callback_data="sp_admin_menu"
    )
])
```

---

## ๐งช ุทุฑููุฉ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงูุนููุงุก:
```
1. ุงูุชุญ ุงูุจูุช
2. ุงุถุบุท "ุณูุฑฺคุฑ US only (1) | Server 2 ๐"
3. ุงุถุบุท "ุดุฑุงุก ุฑูู"
4. ุงุฎุชุฑ "ุฑูู ููุฑุฉ ูุงุญุฏุฉ (Temp)" ุฃู "ุฅูุฌุงุฑ ุฑูู (Rent)"
5. ุฅุฐุง ุงุฎุชุฑุช ุฅูุฌุงุฑ: ุงุฎุชุฑ ุงููุฏุฉ (ูุซู: 7 ุฃูุงู)
6. ุงุถุบุท "ุงุจุญุซ ุนู ุฏููุฉ"
7. ุงูุชุจ ุงุณู ุงูุฏููุฉ (ูุซู: us)
8. ุงุฎุชุฑ ุงูุฏููุฉ
9. ุงุถุบุท "ุงุจุญุซ ุนู ุฎุฏูุฉ"
10. ุงูุชุจ ุงุณู ุงูุฎุฏูุฉ (ูุซู: telegram)
11. ุงุฎุชุฑ ุงูุฎุฏูุฉ
12. ุฃูุฏ ุงูุดุฑุงุก
13. ุงูุชุธุฑ ุงุณุชูุงู ุงูุฑูู
```

### ุงุฎุชุจุงุฑ ุงูุขุฏูู:
```
1. ูุขุฏููุ ุงูุชุญ ูุงุฆูุฉ ุงูุฅุนุฏุงุฏุงุช
2. ุงุถุบุท "ุฅุฏุงุฑุฉ SMSPool"
3. ุงุฎุชุจุฑ:
   - ุชุนููู ููุชุงุญ API โ
   - ุงุฎุชุจุงุฑ ุงูุงุชุตุงู โ
   - ุชูุนูู/ุชุนุทูู ุงูุฎุฏูุฉ โ
   - ุชุนุฏูู ูุณุจุฉ ุงูุฑุจุญ โ
```

---

## ๐ ุงููููุฒุงุช ุงูุฅุถุงููุฉ

### 1. Cache ุฐูู:
- ุชุฎุฒูู ุงูุฃุณุนุงุฑ ูุงูุฎุฏูุงุช ููุฏุฉ 5 ุฏูุงุฆู
- ุชูููู ุงูุทูุจุงุช ุฅูู API
- ุชุญุณูู ุงูุณุฑุนุฉ

### 2. ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ:
```python
ERROR_CODES = {
    '0x0000': 'ุฑุตูุฏ ุงูุญุณุงุจ ุบูุฑ ูุงูู',
    '0x0001': 'ุงูุฎุฏูุฉ ุบูุฑ ูุชููุฑุฉ ุญุงููุงู',
    '0x0002': 'ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงููููุน',
    '0x0003': 'ุชู ุฑูุถ ุงูุทูุจ',
    '0x0004': 'ุงูุชูุช ูููุฉ ุงูุงุชุตุงู',
    '0x0005': 'ููุชุงุญ API ุบูุฑ ุตุญูุญ',
    ...
}
```

### 3. ูุฑุงูุจุฉ ุชููุงุฆูุฉ ููุฑุณุงุฆู:
- ูุญุต ูู 10 ุซูุงูู
- ุฅุดุนุงุฑ ููุฑู ุนูุฏ ุงูุงุณุชูุงู
- ุฅููุงู ุชููุงุฆู ุจุนุฏ ุงูุงุณุชูุงู

### 4. Pagination:
- ุงูุฃุฑูุงู ุงููุดุทุฉ: 10 ููู ุตูุญุฉ
- ุงูุณุฌู: 10 ููู ุตูุญุฉ
- ุงูุฎุฏูุงุช: 15 ููู ุตูุญุฉ

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### ูุจู ุงูุชุดุบูู:
1. โ ุชุฃูุฏ ูู ุชุซุจูุช ุงูููุชุจุงุช: `pip install -r requirements.txt`
2. โ ุชุฃูุฏ ูู ูุฌูุฏ ููุชุงุญ API ูู SMSPool
3. โ ูุนูู Inline Mode ูู BotFather
4. โ ุชุฃูุฏ ูู ุชุดุบูู job_queue

### ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ ูู BotFather:
```
/setinline
ุงุฎุชุฑ ุงูุจูุช
ุงูุชุจ: Search SMSPool numbers
```

### ุงูุจูุฆุฉ ุงููุทููุจุฉ:
```
Python 3.8+
python-telegram-bot 20.x
requests
aiosqlite
pytz
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "Inline Query ูุง ูุนูู"
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชูุนูู Inline Mode ูู BotFather
2. ุชุญูู ูู ุชุณุฌูู InlineQueryHandler
3. ุชุฃูุฏ ูู ุฃู ุงูุจูุช ููุฏ ุงูุชุดุบูู

### ุงููุดููุฉ: "ูุง ูููู ุญูุธ ููุชุงุญ API"
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุตุญุฉ ุงูููุชุงุญ (32+ ุญุฑู)
2. ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
3. ุงุฎุชุจุฑ ุงูููุชุงุญ ุนูู ูููุน SMSPool

### ุงููุดููุฉ: "ุฒุฑ ุงูุขุฏูู ูุง ูุณุชุฌูุจ"
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุณุฌูู ConversationHandler
2. ุชุญูู ูู ุงูู states (100, 101)
3. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ุขุฏูู

---

## ๐ ุงูุฏุนู

ููุฒูุฏ ูู ุงููุนูููุงุชุ ุฑุงุฌุน:
- `SMSPOOL_FIXES_README.md` - ุชูุซูู ููุตู
- `smspool_integration_example.py` - ุฃูุซูุฉ ุงูุชูุงูู
- Logs ุงูุจูุช ููุฃุฎุทุงุก

---

## ๐ ุฅุญุตุงุฆูุงุช ุงูุชุญุฏูุซ

- **ุนุฏุฏ ุงูุฏูุงู ุงููุถุงูุฉ**: 2 (process_rent_purchase, ูุนุงูุฌุงุช ูุญุณูุฉ)
- **ุนุฏุฏ ุงูุฅุตูุงุญุงุช**: 7 ูุดุงูู ุฑุฆูุณูุฉ
- **ุนุฏุฏ ุงููููุงุช ุงููุนุฏูุฉ**: 1 (`smspool_service.py`)
- **ุนุฏุฏ ุงููููุงุช ุงููุถุงูุฉ**: 5 (ุชูุซูู ูุฃูุซูุฉ)
- **ุนุฏุฏ ุงูุฃุณุทุฑ ุงููุถุงูุฉ**: ~200 ุณุทุฑ
- **ุงูุชูุงูู**: Python 3.8+, python-telegram-bot 20.x

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุจูุฌุงุญ:
- โ ูู ุถุบุท ุงูููู
- โ ุฅุตูุงุญ ุดุฑุงุก ุฑูู SMSPool
- โ ุฅุถุงูุฉ ุฏุนู ุงูุฅูุฌุงุฑ (Rent)
- โ ุชุญุณูู ุงุฎุชูุงุฑ ุงูุฏูู ูุงูุฎุฏูุงุช
- โ ุฅุถุงูุฉ Inline Query ูุญุณู
- โ ุชุญุฏูุซ ุงูุชุณููุงุช
- โ ุฏุนู ูุงูู ููุบุชูู
- โ ุฅุตูุงุญ ุฌููุน ูุดุงูู ุงูุขุฏูู (Token, Toggle, Margin)

**ุงูุฎุฏูุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ุงูููุฑู! ๐**

---

๐ **ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: 2026-02-03
โ **ุงูุญุงูุฉ**: ููุชูู ูููุฎุชุจุฑ
๐ง **ุงูุฅุตุฏุงุฑ**: 2.0.0
๐จโ๐ป **ุงููุทูุฑ**: AI Assistant
