# ุฅุตูุงุญุงุช ูุชุญุณููุงุช SMSPool Service

## ุงูุชุญุฏูุซุงุช ุงูุชู ุชู ุชุทุจูููุง

### 1. โ ูู ุถุบุท ุงูููู
ุชู ูู ุถุบุท ุงูููู `telegram_bot (2) (1).zip` ุจูุฌุงุญ ูุชุญุฏูุซ ุฌููุน ุงููููุงุช.

### 2. โ ุฅุถุงูุฉ ุฏุนู ุดุฑุงุก ุฑูู ุฅูุฌุงุฑ (Rent)
ุชู ุฅุถุงูุฉ ุฏุงูุฉ ุฌุฏูุฏุฉ `process_rent_purchase()` ูุฏุนู ุดุฑุงุก ุงูุฃุฑูุงู ุจูุธุงู ุงูุฅูุฌุงุฑ.

**ุงููุฒุงูุง:**
- ุฏุนู ูุงูู ูุดุฑุงุก ุฃุฑูุงู ุจูุฏุฏ ูุฎุชููุฉ (1ุ 3ุ 7ุ 30 ููู)
- ุฌูุจ ุฃุณุนุงุฑ ุงูุฅูุฌุงุฑ ูู API ูุจุงุดุฑุฉ ุจุงุณุชุฎุฏุงู endpoint `/request/rent_price`
- ูุนุงูุฌุฉ ุงูุดุฑุงุก ุจููุณ ุทุฑููุฉ ุงูุฃุฑูุงู ุงูุนุงุฏูุฉ ููู ูุน ูุชุฑุงุช ุตูุงุญูุฉ ุฃุทูู

### 3. โ ุชุญุณูู ุชุฏูู ุงุฎุชูุงุฑ ููุน ุงูุฑูู
ุชู ุชุญุณูู ุชุฏูู ุงูุดุฑุงุก ููุจุฏุฃ ุจุงุฎุชูุงุฑ ููุน ุงูุฎุฏูุฉ:

1. **ุงูุฎุทูุฉ 1**: ุงุฎุชูุงุฑ ููุน ุงูุฎุฏูุฉ
   - ๐ข ุฑูู ููุฑุฉ ูุงุญุฏุฉ (Temp)
   - ๐ ุฅูุฌุงุฑ ุฑูู (Rent)

2. **ุงูุฎุทูุฉ 2** (ููุฅูุฌุงุฑ ููุท): ุงุฎุชูุงุฑ ูุฏุฉ ุงูุฅูุฌุงุฑ
   - ููู ูุงุญุฏ
   - 3 ุฃูุงู
   - 7 ุฃูุงู
   - 30 ููู

3. **ุงูุฎุทูุฉ 3**: ุงูุจุญุซ ุนู ุงูุฏููุฉ ุจุงุณุชุฎุฏุงู Inline Query
4. **ุงูุฎุทูุฉ 4**: ุงูุจุญุซ ุนู ุงูุฎุฏูุฉ ุจูุงุกู ุนูู ุงูุฏููุฉ ุงููุฎุชุงุฑุฉ
5. **ุงูุฎุทูุฉ 5**: ุชุฃููุฏ ุงูุดุฑุงุก

### 4. โ ุชุญุณูู ุงูุจุญุซ ูู ุงูุฏูู ูุงูุฎุฏูุงุช

#### ุงูุจุญุซ ุนู ุงูุฏูู:
- ุงูุจุญุซ ูุจุฏุฃ ูู ุฃูู ุญุฑู (startswith) ููุญุตูู ุนูู ูุชุงุฆุฌ ุฃูุซุฑ ุฏูุฉ
- ุฏุนู ุงูุจุญุซ ูู ุงุณู ุงูุฏููุฉ ูุงูููุฏ ุงููุตูุฑ (ูุซู US, GB)
- ุนุฑุถ ุงูุฏูู ุงูุดุงุฆุนุฉ ุฃููุงู (US, GB, CA, DE, FR, NL, RU, IN, PH, ID)

#### ุงูุจุญุซ ุนู ุงูุฎุฏูุงุช:
- ุงูุจุญุซ ุญุณุจ ุงูุฏููุฉ ุงููุฎุชุงุฑุฉ ููุท
- ุนุฑุถ ุงูุณุนุฑ ุจุงูู Live ูู API ูุน ูุงูุด ุงูุฑุจุญ
- ุฏุนู ููุน ุงูุฑูู (Temp/Rent) ูู ุญุณุงุจ ุงูุณุนุฑ
- ุฃููููุงุช ูููุฒุฉ ููุฎุฏูุงุช ุงูุดุงุฆุนุฉ (WhatsApp ๐, Telegram โ๏ธ, Google ๐, Facebook ๐, Instagram ๐ท)

### 5. โ ุชุญุฏูุซ ุงูุชุณููุงุช

ุชู ุชุญุฏูุซ ุชุณููุงุช ุงูุฎุฏูุฉ ูู ุงูุฑุณุงุฆู:
- **ุงูุนุฑุจูุฉ**: `๐ฑ ุณูุฑฺคุฑ US only (1) | Server 2 ๐`
- **ุงูุฅูุฌููุฒูุฉ**: `๐ฑ SMS Numbers`

ูุฐุง ูุณูู ุงูุชูููุฒ ุจูู ุณูุฑูุฑุงุช ุงูุฃุฑูุงู ุงููุฎุชููุฉ.

### 6. โ ุฏุนู ูุงูู ููุบุชูู (ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ)

ุฌููุน ุงูุฑุณุงุฆู ูุงูุฃุฒุฑุงุฑ ูุชููุฑุฉ ุจุงููุบุชูู:
- ุงุฎุชูุงุฑ ููุน ุงูุฎุฏูุฉ
- ุงูุจุญุซ ุนู ุงูุฏูู
- ุงูุจุญุซ ุนู ุงูุฎุฏูุงุช
- ุฑุณุงุฆู ุงูุชุฃููุฏ ูุงูุฃุฎุทุงุก
- ุฅุนุฏุงุฏุงุช ุงูุขุฏูู

### 7. โ ุฅุตูุงุญุงุช ุงูุขุฏูู

ุชู ุงูุชุฃูุฏ ูู ูุฌูุฏ ุฌููุน ุงููุนุงูุฌุงุช ููุขุฏูู:

#### `handle_smspool_admin_callback`
ูุนุงูุฌ ุดุงูู ูุฌููุน callbacks ุฅุนุฏุงุฏุงุช SMSPool:
- โ `sp_admin_menu` - ุนุฑุถ ูุงุฆูุฉ ุงูุฅุนุฏุงุฏุงุช
- โ `sp_admin_toggle` - ุชูุนูู/ุชุนุทูู ุงูุฎุฏูุฉ
- โ `sp_admin_test` - ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจู API
- โ `sp_admin_set_key` - ุชุนููู ููุชุงุญ API (ูุนูุฏ ุฑูู 100 ููู ConversationHandler)
- โ `sp_admin_margin` - ุชุนุฏูู ูุณุจุฉ ุงูุฑุจุญ (ูุนูุฏ ุฑูู 101 ููู ConversationHandler)

#### `handle_admin_api_key_input`
ูุนุงูุฌ ุฅุฏุฎุงู ููุชุงุญ API ุงูุฌุฏูุฏ:
- ุงูุชุญูู ูู ุทูู ุงูููุชุงุญ (32 ุญุฑู ุนูู ุงูุฃูู)
- ุงุฎุชุจุงุฑ ุงูููุชุงุญ ูุน API ูุจู ุงูุญูุธ
- ุนุฑุถ ุงูุฑุตูุฏ ุนูุฏ ุงููุฌุงุญ

#### `handle_admin_margin_input`
ูุนุงูุฌ ุฅุฏุฎุงู ูุณุจุฉ ุงูุฑุจุญ:
- ูุจูู ุงูุฃุฑูุงู ูู 0 ุฅูู 500
- ุญูุธ ุงููุณุจุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุฒุงูุฉ ุนูุงูุฉ % ุฅู ููุฌุฏุช

## ุงูุชูุงูู ูุน ุงูุจูุช ุงูุฑุฆูุณู

### ุฎุทูุงุช ุงูุชูุงูู (ูู bot.py ุฃู bot_admin.py):

#### 1. ุงุณุชูุฑุงุฏ ุงููุญุฏุฉ
```python
from smspool_service import (
    smspool_main_menu,
    handle_smspool_callback,
    handle_smspool_inline_query,
    smspool_admin_menu,
    handle_smspool_admin_callback,
    handle_admin_api_key_input,
    handle_admin_margin_input,
    SMSPoolDB
)
```

#### 2. ุชุณุฌูู handlers ููุนููุงุก
```python
# Callback handler ููู SMSPool
application.add_handler(CallbackQueryHandler(
    handle_smspool_callback,
    pattern=r'^sp_'
))

# Inline query handler ููุจุญุซ
application.add_handler(InlineQueryHandler(
    handle_smspool_inline_query
))
```

#### 3. ุชุณุฌูู handlers ููุขุฏูู

**ุงูุทุฑููุฉ ุงููููุตู ุจูุง: ุงุณุชุฎุฏุงู ConversationHandler**

```python
from telegram.ext import ConversationHandler, MessageHandler, filters

# States ููู conversation
SMSPOOL_SET_KEY = 100
SMSPOOL_SET_MARGIN = 101

smspool_admin_conv = ConversationHandler(
    entry_points=[
        CallbackQueryHandler(handle_smspool_admin_callback, pattern=r'^sp_admin_')
    ],
    states={
        SMSPOOL_SET_KEY: [
            MessageHandler(filters.TEXT & ~filters.COMMAND, handle_admin_api_key_input)
        ],
        SMSPOOL_SET_MARGIN: [
            MessageHandler(filters.TEXT & ~filters.COMMAND, handle_admin_margin_input)
        ],
    },
    fallbacks=[
        CallbackQueryHandler(handle_smspool_admin_callback, pattern=r'^sp_admin_menu$')
    ],
    allow_reentry=True,
    conversation_timeout=180
)

application.add_handler(smspool_admin_conv)
```

**ุงูุทุฑููุฉ ุงูุจุฏููุฉ: ุจุฏูู ConversationHandler**

ุฅุฐุง ูุงู ุงูุจูุช ุงูุญุงูู ูุง ูุณุชุฎุฏู ConversationHandlerุ ูููู ุงุณุชุฎุฏุงู context.user_data:

```python
# ูู callback handler ุงูุขุฏูู
data = query.data

if data == "sp_admin_set_key":
    context.user_data['waiting_smspool_key'] = True
    await query.edit_message_text("๐ ุฃุฑุณู ููุชุงุญ API...")
    return

elif data == "sp_admin_margin":
    context.user_data['waiting_smspool_margin'] = True
    await query.edit_message_text("๐น ุฃุฑุณู ูุณุจุฉ ุงูุฑุจุญ...")
    return

# ูู message handler ุนุงู
if context.user_data.get('waiting_smspool_key'):
    context.user_data.pop('waiting_smspool_key', None)
    await handle_admin_api_key_input(update, context)
    return

elif context.user_data.get('waiting_smspool_margin'):
    context.user_data.pop('waiting_smspool_margin', None)
    await handle_admin_margin_input(update, context)
    return
```

#### 4. ุฅุถุงูุฉ ุฒุฑ SMSPool ูู ูุงุฆูุฉ ุงูุขุฏูู

ูู ูุงุฆูุฉ ุฅุนุฏุงุฏุงุช ุงูุฎุฏูุงุช ุงูุฎุงุฑุฌูุฉ ููุขุฏูู:

```python
keyboard.append([
    InlineKeyboardButton(
        "๐ฑ ุฅุฏุงุฑุฉ SMSPool" if language == 'ar' else "๐ฑ Manage SMSPool",
        callback_data="sp_admin_menu"
    )
])
```

## ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญุงุช

### 1. ุงุฎุชุจุงุฑ ุดุฑุงุก ุฑูู ูุคูุช
```
1. ุงูุชุญ ุงูุจูุช
2. ุงุฎุชุฑ ุฎุฏูุฉ SMSPool
3. ุงุฎุชุฑ "ุฑูู ููุฑุฉ ูุงุญุฏุฉ (Temp)"
4. ุงุจุญุซ ุนู ุฏููุฉ (ูุซู: us)
5. ุงุฎุชุฑ ุงูุฏููุฉ
6. ุงุจุญุซ ุนู ุฎุฏูุฉ (ูุซู: telegram)
7. ุงุฎุชุฑ ุงูุฎุฏูุฉ
8. ุฃูุฏ ุงูุดุฑุงุก
9. ุชุญูู ูู ุงุณุชูุงู ุงูุฑูู
```

### 2. ุงุฎุชุจุงุฑ ุดุฑุงุก ุฑูู ุฅูุฌุงุฑ
```
1. ุงูุชุญ ุงูุจูุช
2. ุงุฎุชุฑ ุฎุฏูุฉ SMSPool
3. ุงุฎุชุฑ "ุฅูุฌุงุฑ ุฑูู (Rent)"
4. ุงุฎุชุฑ ุงููุฏุฉ (ูุซู: 7 ุฃูุงู)
5. ุงุจุญุซ ุนู ุฏููุฉ
6. ุงุฎุชุฑ ุงูุฏููุฉ
7. ุงุจุญุซ ุนู ุฎุฏูุฉ
8. ุงุฎุชุฑ ุงูุฎุฏูุฉ
9. ุฃูุฏ ุงูุดุฑุงุก
10. ุชุญูู ูู ุงุณุชูุงู ุงูุฑูู ุจูุชุฑุฉ ุตูุงุญูุฉ ุฃุทูู
```

### 3. ุงุฎุชุจุงุฑ ุฅุนุฏุงุฏุงุช ุงูุขุฏูู
```
1. ูุขุฏููุ ุงูุชุญ ูุงุฆูุฉ ุงูุฅุนุฏุงุฏุงุช
2. ุงุฎุชุฑ "ุฅุฏุงุฑุฉ SMSPool"
3. ุงุฎุชุฑ "ุชุนููู ููุชุงุญ API"
4. ุฃุฏุฎู ุงูููุชุงุญ
5. ุชุญูู ูู ูุฌุงุญ ุงูุงุชุตุงู
6. ุงุฎุชุฑ "ุชุนุฏูู ูุณุจุฉ ุงูุฑุจุญ"
7. ุฃุฏุฎู ูุณุจุฉ ุฌุฏูุฏุฉ (ูุซู: 35)
8. ุชุญูู ูู ุงูุชุญุฏูุซ
9. ุงุฎุชุฑ "ุชูุนูู/ุชุนุทูู ุงูุฎุฏูุฉ"
10. ุชุญูู ูู ุชุบููุฑ ุงูุญุงูุฉ
```

## ุงููููุงุช ุงูููุนุฏููุฉ

1. โ `smspool_service.py` - ุงูููู ุงูุฑุฆูุณู ูุน ุฌููุน ุงูุฅุตูุงุญุงุช
2. โ `smspool_service.py.backup` - ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงูููู ุงูุฃุตูู

## ุงููููุฒุงุช ุงูุฅุถุงููุฉ

### 1. Cache ููุฃุณุนุงุฑ ูุงูุฎุฏูุงุช
- ุชุฎุฒูู ูุคูุช ููุฃุณุนุงุฑ ูุงูุฎุฏูุงุช ูุงูุฏูู ููุฏุฉ 5 ุฏูุงุฆู
- ุชูููู ุนุฏุฏ ุงูุทูุจุงุช ุฅูู API
- ุชุญุณูู ุงูุฃุฏุงุก

### 2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุญุณููุฉ
- ุฃููุงุฏ ุฃุฎุทุงุก ูุงุถุญุฉ ูุน ุฑุณุงุฆู ูุชุฑุฌูุฉ
- ูุนุงูุฌุฉ timeout ูrate limit
- ุชุณุฌูู ุดุงูู ููุฃุฎุทุงุก

### 3. ุงููุฑุงูุจุฉ ุงูุชููุงุฆูุฉ ููุฑุณุงุฆู
- ูุญุต ุฏูุฑู ูู 10 ุซูุงูู
- ุฅุดุนุงุฑ ุชููุงุฆู ุนูุฏ ูุตูู ุงูุฑุณุงูุฉ
- ุฅููุงู ุงููุฑุงูุจุฉ ุนูุฏ ุงูุงุณุชูุงู ุฃู ุงูุฅูุบุงุก

### 4. Pagination
- ุตูุญุงุช ููุฃุฑูุงู ุงููุดุทุฉ (10 ุฃุฑูุงู ููู ุตูุญุฉ)
- ุตูุญุงุช ููุณุฌู ูุงูุฃุฑูุงู ุงูููุชููุฉ
- ุตูุญุงุช ููุฎุฏูุงุช (15 ุฎุฏูุฉ ููู ุตูุญุฉ)

## ุงูุฏุนู ุงูููู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. ุชุฃูุฏ ูู ุชุซุจูุช ุฌููุน ุงูููุชุจุงุช ุงููุทููุจุฉ (requirements.txt)
2. ุชุญูู ูู ุตุญุฉ ููุชุงุญ API ูู SMSPool
3. ุฑุงุฌุน logs ุงูุจูุช ููุฃุฎุทุงุก
4. ุชุฃูุฏ ูู ุชุณุฌูู handlers ุจุดูู ุตุญูุญ ูู bot.py

## ุงูููุงุญุธุงุช ุงููููุฉ

- โ๏ธ ุชุฃูุฏ ูู ุฃู `Config.SMSPOOL_API_KEY` ููุนุฑูู ูู ููู config.py
- โ๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฌุจ ุฃู ุชุญุชูู ุนูู ุฌุฏุงูู SMSPool (ูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู)
- โ๏ธ InlineQueryHandler ูุฌุจ ุฃู ูููู ูููุนูู ูู ุฅุนุฏุงุฏุงุช ุงูุจูุช ุนูู BotFather
- โ๏ธ Job queue ูุฌุจ ุฃู ูููู ูููุนูู ูููุฑุงูุจุฉ ุงูุชููุงุฆูุฉ

## ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ

1. ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ููุตูุฉ ููุขุฏูู
2. ุฏุนู ุชุฌุฏูุฏ ุชููุงุฆู ููุฃุฑูุงู ุงูููุชููุฉ
3. ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุฎูุงุถ ุฑุตูุฏ API
4. ููุงุชุฑ ูุชูุฏูุฉ ููุจุญุซ ุนู ุงูุฎุฏูุงุช
5. ุฏุนู pool selection ููุฃุฑูุงู

---

๐ **ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ**: 2026-02-03
โ **ุงูุญุงูุฉ**: ุฌุงูุฒ ููุงุณุชุฎุฏุงู
๐ง **ุงูุฅุตุฏุงุฑ**: 2.0.0
