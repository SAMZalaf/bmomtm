# ุฏููู ุงูุชูุงูู ุงูุณุฑูุน - SMSPool Purchase System

## ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

### 1. ุชุซุจูุช ุงูููุชุจุงุช
```bash
pip install requests python-telegram-bot pytz aiosqlite
```

### 2. ุงูุญุตูู ุนูู API Key
- ุงูุชุณุฌูู ูู [SMSPool](https://www.smspool.net/)
- ุงูุฐูุงุจ ุฅูู Settings โ API
- ูุณุฎ API Key

---

## ุงูุชูุงูู ูุน bot.py

### ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ Imports

ุฃุถู ูุฐู ุงูุณุทูุฑ ูู ุฃุนูู ููู `bot.py`:

```python
from smspool_service import (
    handle_smspool_callback,
    handle_smspool_inline_query,
    smspool_admin_menu,
    handle_smspool_admin_callback,
    handle_admin_api_key_input,
    handle_admin_margin_input
)
```

### ุงูุฎุทูุฉ 2: ุฅุถุงูุฉ Handlers

ุฃุถู ูุฐู ุงูู handlers ูู ุฏุงูุฉ `main()` ุจุนุฏ ุฅูุดุงุก `application`:

```python
# 1. Inline Query Handler ููุจุญุซ ุนู ุงูุฏูู ูุงูุฎุฏูุงุช
application.add_handler(InlineQueryHandler(handle_smspool_inline_query))

# 2. Callback Handler ูููุณุชุฎุฏููู (ูุนุงูุฌุฉ ุงูุดุฑุงุก)
application.add_handler(CallbackQueryHandler(
    handle_smspool_callback,
    pattern='^sp_'
))

# 3. Callback Handler ููุขุฏูู (ููุญุฉ ุงูุชุญูู)
application.add_handler(CallbackQueryHandler(
    handle_smspool_admin_callback,
    pattern='^sp_admin_'
))

# 4. Conversation Handler ูุฅุฏุฎุงู API Key
from telegram.ext import ConversationHandler, MessageHandler, filters

smspool_admin_conv = ConversationHandler(
    entry_points=[],
    states={
        100: [MessageHandler(filters.TEXT & ~filters.COMMAND, handle_admin_api_key_input)],
        101: [MessageHandler(filters.TEXT & ~filters.COMMAND, handle_admin_margin_input)]
    },
    fallbacks=[],
    allow_reentry=True
)
application.add_handler(smspool_admin_conv)
```

### ุงูุฎุทูุฉ 3: ุฅุถุงูุฉ ุฒุฑ ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ

ูู ุฏุงูุฉ ุนุฑุถ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉุ ุฃุถู ุฒุฑ SMSPool:

```python
# ูู ุฏุงูุฉ main_menu() ุฃู ูุง ูุดุงุจููุง
keyboard = [
    # ... ุงูุฃุฒุฑุงุฑ ุงูุฃุฎุฑู
    [InlineKeyboardButton("๐ฑ ุฃุฑูุงู SMS", callback_data="sp_main")],
    # ... ุงูุฃุฒุฑุงุฑ ุงูุฃุฎุฑู
]
```

### ุงูุฎุทูุฉ 4: ุฅุถุงูุฉ ุฒุฑ ูู ููุญุฉ ุงูุขุฏูู

ูู ููุญุฉ ุชุญูู ุงูุขุฏููุ ุฃุถู ุฒุฑ SMSPool:

```python
# ูู ุฏุงูุฉ admin_menu() ุฃู ูุง ูุดุงุจููุง
keyboard = [
    # ... ุงูุฃุฒุฑุงุฑ ุงูุฃุฎุฑู
    [InlineKeyboardButton("โ๏ธ ุฅุฏุงุฑุฉ SMSPool", callback_data="sp_admin_menu")],
    # ... ุงูุฃุฒุฑุงุฑ ุงูุฃุฎุฑู
]
```

---

## ุฅุนุฏุงุฏ ุงููุธุงู

### 1. ุชุดุบูู ุงูุจูุช
```bash
python3 bot.py
```

### 2. ุฅุนุฏุงุฏ API Key (ููุขุฏูู ููุท)
1. ุงูุชุญ ุงูุจูุช
2. ุงุฐูุจ ุฅูู ููุญุฉ ุงูุขุฏูู
3. ุงุฎุชุฑ "โ๏ธ ุฅุฏุงุฑุฉ SMSPool"
4. ุงุฎุชุฑ "๐ ุชุนููู ููุชุงุญ API"
5. ุฃุฑุณู API Key ูู SMSPool
6. ุชุฃููุฏ: ุณูุธูุฑ ุงูุฑุตูุฏ ุงููุชุงุญ

### 3. ุชูุนูู ุงูุฎุฏูุฉ
1. ูู ููุญุฉ ุฅุฏุงุฑุฉ SMSPool
2. ุงุฎุชุฑ "โ ุชูุนูู ุงูุฎุฏูุฉ"
3. ุชุฃูุฏ ูู ุธููุฑ "โ ููุนููุฉ"

### 4. ุถุจุท ูุณุจุฉ ุงูุฑุจุญ (ุงุฎุชูุงุฑู)
1. ูู ููุญุฉ ุฅุฏุงุฑุฉ SMSPool
2. ุงุฎุชุฑ "๐น ุชุนุฏูู ูุณุจุฉ ุงูุฑุจุญ"
3. ุฃุฏุฎู ุงููุณุจุฉ (ูุซู: 30)
4. ุงููุณุจุฉ ุงูุงูุชุฑุงุถูุฉ: 30%

---

## ุงูุงุณุชุฎุฏุงู (ูููุณุชุฎุฏููู)

### 1. ูุชุญ ูุงุฆูุฉ SMSPool
- ุงุถุบุท ุนูู "๐ฑ ุฃุฑูุงู SMS" ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ

### 2. ุดุฑุงุก ุฑูู
1. ุงุฎุชุฑ "๐ ุดุฑุงุก ุฑูู"
2. ุงุถุบุท "๐ ุงุจุญุซ ุนู ุฎุฏูุฉ ุฃู ุฏููุฉ"
3. ุงุจุญุซ ุนู ุฏููุฉ (ูุซู: United States) ุฃู ุงุชุฑู ูุงุฑุบุงู ูุนุฑุถ ุงูุฏูู ุงูุดุงุฆุนุฉ
4. ุงุฎุชุฑ ุฏููุฉ ูู ุงููุชุงุฆุฌ
5. ุงุฎุชุฑ ุฎุฏูุฉ (ูุซู: WhatsApp)
6. ุฑุงุฌุน ุชูุงุตูู ุงูุดุฑุงุก
7. ุงุถุบุท "โ ุชุฃููุฏ ุงูุดุฑุงุก"
8. ุงูุชุธุฑ ุงูุฑุณุงูุฉ (ุณุชุตู ุชููุงุฆูุงู)

### 3. ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- ุงุฎุชุฑ "๐ ุฃุฑูุงูู" ูุนุฑุถ ุงูุทูุจุงุช ุงูุณุงุจูุฉ
- ูููู ูุญุต ุงูุฑุณุงุฆู ูุฏููุงู
- ูููู ุฅูุบุงุก ุงูุทูุจ ูุงุณุชุฑุฏุงุฏ ุงูุฑุตูุฏ

---

## ุงููุธุงุฆู ุงููุชุงุญุฉ

### ูููุณุชุฎุฏููู:
| ุงููุธููุฉ | ุงููุตู |
|---------|-------|
| ๐ ุดุฑุงุก ุฑูู | ุดุฑุงุก ุฑูู ุฌุฏูุฏ |
| ๐ ุฃุฑูุงูู | ุนุฑุถ ุงูุทูุจุงุช |
| ๐ ูุญุต ุงูุฑุณุงูุฉ | ูุญุต ูุฏูู |
| ๐ค ุฅุนุงุฏุฉ ุฅุฑุณุงู | ุทูุจ ุฅุนุงุฏุฉ ุฅุฑุณุงู |
| โ ุฅูุบุงุก | ุฅูุบุงุก ูุงุณุชุฑุฏุงุฏ ุงูุฑุตูุฏ |

### ููุขุฏูู:
| ุงููุธููุฉ | ุงููุตู |
|---------|-------|
| ๐ ุชุนููู API Key | ุฑุจุท ูุน SMSPool |
| โ/โ ุชูุนูู/ุชุนุทูู | ุชุดุบูู ุงูุฎุฏูุฉ |
| ๐น ูุณุจุฉ ุงูุฑุจุญ | ุถุจุท ูุณุจุฉ ุงูุฑุจุญ |
| ๐ ุงูุฅุญุตุงุฆูุงุช | ุนุฑุถ ุงูุทูุจุงุช ุงููุดุทุฉ |

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "ุงูุฎุฏูุฉ ูุชูููุฉ ูุคูุชุงู"
**ุงูุญู**: 
- ุชุฃูุฏ ูู ุชูุนูู ุงูุฎุฏูุฉ ูู ููุญุฉ ุงูุขุฏูู
- ุชุฃูุฏ ูู ุฅุฏุฎุงู API Key ุตุญูุญ

### ุฎุทุฃ: "ุฑุตูุฏ ุงูุญุณุงุจ ุบูุฑ ูุงูู"
**ุงูุญู**:
- ุชุญูู ูู ุฑุตูุฏ SMSPool (ููุขุฏูู)
- ุฃุถู ุฑุตูุฏ ุฅูู ุญุณุงุจ SMSPool

### ุฎุทุฃ: "ุงูุฎุฏูุฉ ุบูุฑ ูุชููุฑุฉ ุญุงููุงู"
**ุงูุญู**:
- ุฌุฑุจ ุฏููุฉ ุฃุฎุฑู
- ุฌุฑุจ ุฎุฏูุฉ ุฃุฎุฑู
- ุงูุชุธุฑ ููููุงู ูุญุงูู ูุฑุฉ ุฃุฎุฑู

### ุฎุทุฃ: "ูู ุชุตู ุงูุฑุณุงูุฉ"
**ุงูุญู**:
- ุงูุชุธุฑ ุญุชู 10 ุฏูุงุฆู (ูุฏุฉ ุงูุตูุงุญูุฉ)
- ุงุถุบุท "๐ ูุญุต ุงูุฑุณุงูุฉ" ูุฏููุงู
- ุงุถุบุท "๐ค ุฅุนุงุฏุฉ ุฅุฑุณุงู"
- ุฅุฐุง ูู ุชุตู: ุงุถุบุท "โ ุฅูุบุงุก ูุงุณุชุฑุฏุงุฏ"

---

## ุงูุฃูุงู

### ุญูุงูุฉ API Key
- โ๏ธ **ูุง ุชุดุงุฑู** API Key ูุน ุฃุญุฏ
- ๐ ููุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุขูู
- ๐ค ุงูุขุฏูู ููุท ูุณุชุทูุน ุงููุตูู ุฅููู

### ุญูุงูุฉ ุงูุจูุงูุงุช
- ๐ ุฌููุน ุงูุทูุจุงุช ูุดูุฑุฉ (HTTPS)
- ๐พ ุงูุจูุงูุงุช ูุญููุธุฉ ูู ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ
- ๐ ุงููุตูู ูุญุฏูุฏ ูููุณุชุฎุฏู ูุทูุจุงุชู ููุท

---

## API Endpoints ุงููุณุชุฎุฏูุฉ

| Endpoint | ุงููุธููุฉ |
|----------|---------|
| `/request/balance` | ุฌูุจ ุงูุฑุตูุฏ |
| `/service/retrieve_all` | ุฌูุจ ุงูุฎุฏูุงุช |
| `/country/retrieve_all` | ุฌูุจ ุงูุฏูู |
| `/request/price` | ุฌูุจ ุงูุณุนุฑ |
| `/purchase/sms` | ุดุฑุงุก ุฑูู |
| `/sms/check` | ูุญุต ุงูุฑุณุงูุฉ |
| `/sms/cancel` | ุฅูุบุงุก ุงูุฑูู |
| `/sms/resend` | ุฅุนุงุฏุฉ ุฅุฑุณุงู |
| `/request/active` | ุงูุทูุจุงุช ุงููุดุทุฉ |

---

## ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงููุณุชุฎุฏูุฉ:

#### 1. `smspool_settings`
```sql
CREATE TABLE smspool_settings (
    id INTEGER PRIMARY KEY DEFAULT 1,
    api_key TEXT,
    enabled INTEGER DEFAULT 1,
    margin_percent REAL DEFAULT 30,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
```

#### 2. `smspool_orders`
```sql
CREATE TABLE smspool_orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    order_id TEXT NOT NULL UNIQUE,
    number TEXT,
    country TEXT,
    country_id TEXT,
    service TEXT,
    service_id TEXT,
    pool TEXT,
    cost_price REAL DEFAULT 0,
    sale_price REAL DEFAULT 0,
    status TEXT DEFAULT 'pending',
    sms_code TEXT,
    full_sms TEXT,
    expires_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
)
```

#### 3. `smspool_services_cache`
```sql
CREATE TABLE smspool_services_cache (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    service_id TEXT NOT NULL,
    service_name TEXT NOT NULL,
    short_name TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
```

### ููุงุญุธุฉ:
ุงูุฌุฏุงูู ุชููุดุฃ ุชููุงุฆูุงู ุนูุฏ ุฃูู ุชุดุบูู ููุจูุช.

---

## ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุณุฑูุน:
```bash
# 1. ุชุดุบูู ุงูุจูุช
python3 bot.py

# 2. ูู Telegram:
# - ุงูุชุญ ุงูุจูุช
# - ุงุฐูุจ ุฅูู ููุญุฉ ุงูุขุฏูู
# - ุงุฎุชุฑ "โ๏ธ ุฅุฏุงุฑุฉ SMSPool"
# - ุฃุฏุฎู API Key
# - ูุนูู ุงูุฎุฏูุฉ
# - ุงุฑุฌุน ุฅูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
# - ุงุฎุชุฑ "๐ฑ ุฃุฑูุงู SMS"
# - ุงุฎุชุฑ "๐ ุดุฑุงุก ุฑูู"
# - ุงุจุญุซ ุนู "United States"
# - ุงุฎุชุฑ ุฏููุฉ
# - ุงุฎุชุฑ ุฎุฏูุฉ
# - ุฃููู ุงูุดุฑุงุก
```

---

## ุงูุฏุนู

### ูููุทูุฑูู:
- ๐ ุงูุฑุฃ `SMSPOOL_PURCHASE_FLOW.md` ููุชูุงุตูู ุงููุงููุฉ
- ๐ ุงูุฑุฃ `SMSPOOL_CHANGES_SUMMARY.md` ูููุฎุต ุงูุชุนุฏููุงุช
- ๐ ุฑุงุฌุน ุงูููุฏ ูู `smspool_service.py`

### ูููุณุชุฎุฏููู:
- ๐ฌ ุชูุงุตู ูุน ุงูุขุฏูู ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู
- ๐ฑ ุฌุฑุจ ุฏูู ูุฎุฏูุงุช ูุฎุชููุฉ
- โณ ุงูุชุธุฑ ุญุชู 10 ุฏูุงุฆู ููุตูู ุงูุฑุณุงูุฉ

---

## ุงูุฅุตุฏุงุฑุงุช

### v1.0.0 (2026-02-02)
- โ ูุธุงู ุดุฑุงุก ูุงูู ููุชูุงูู
- โ Inline Query ููุจุญุซ
- โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- โ ูุฑุงูุจุฉ ุชููุงุฆูุฉ ููุฑุณุงุฆู
- โ ููุญุฉ ุชุญูู ููุขุฏูู
- โ ุฏุนู ุงููุบุชูู (ุนุฑุจู/ุฅูุฌููุฒู)

---

## ุงูุชุฑุฎูุต

ูุฐุง ุงููุธุงู ุฌุฒุก ูู ุงูุจูุช ุงูุฑุฆูุณู ููุฎุถุน ูููุณ ุงูุชุฑุฎูุต.

---

**ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ**: 2026-02-02
**ุงูุฅุตุฏุงุฑ**: 1.0.0
**ุงููุทูุฑ**: AI Assistant
