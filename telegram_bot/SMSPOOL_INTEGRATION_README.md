# ๐ฑ ุฏููู ุฏูุฌ ุฎุฏูุฉ SMSPool - ูุณุฎุฉ ุขููุฉ ููุญุณููุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฏูุฌ ุฎุฏูุฉ **SMSPool** ุจูุฌุงุญ ูุน ุจูุช Telegram ุงูุฎุงุต ุจุจูุน ุงูุจุฑููุณูุ ูุน **ุงูุญูุงุธ ุงููุงูู** ุนูู ุฎุฏูุฉ **NonVoip** ุงูููุฌูุฏุฉ. ุงูุฏูุฌ ุขูู 100% ููุง ูุคุซุฑ ุนูู ุฃู ุจูุงูุงุช ุฃู ูุธุงุฆู ููุฌูุฏุฉ.

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ุชุญุฏูุซ ุฏุงูุฉ `handle_buy_numbers()` 
**ุงููููุน:** `bot.py` - ุงูุณุทุฑ ~17033

**ุงููุธููุฉ:**
- ุนุฑุถ ูุงุฆูุฉ ุงุฎุชูุงุฑ ุจูู NonVoip ู SMSPool ุนูุฏูุง ุชููู ููุง ุงูุฎุฏูุชูู ููุนูุชูู
- ูุชุญ ุงูุฎุฏูุฉ ูุจุงุดุฑุฉ ุฅุฐุง ูุงูุช ูุงุญุฏุฉ ููุท ููุนูุฉ
- ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ุฅุฐุง ูุงูุช ููุง ุงูุฎุฏูุชูู ูุนุทูุชูู

**ุงููุฒุงูุง:**
- โ ูุง ุญุฐู ูุฃู ููุฏ ูุฏูู
- โ ุฏุนู ุซูุงุฆู ุงููุบุฉ (ุนุฑุจู/ุฅูุฌููุฒู)
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุงุถุญุฉ ูุณููุฉ

### 2. ุฅุถุงูุฉ ูุนุงูุฌุงุช Callback ุฌุฏูุฏุฉ
**ุงููููุน:** `bot.py` - ุงูุณุทุฑ ~6844

**ุงููุนุงูุฌุงุช:**
1. **`numbers_service_nonvoip`** - ูุชุญ ุฎุฏูุฉ NonVoip
2. **`main_menu`** - ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ

**ุงููุฒุงูุง:**
- โ ูุนุงูุฌุฉ ุขููุฉ ููุฃุฎุทุงุก
- โ logging ุดุงูู
- โ ุชูุงูู ุณูุณ

## ๐ ุถูุงูุงุช ุงูุฃูุงู

### โ ุญูุงูุฉ ูุงููุฉ ูู NonVoip
- **ูุง ุชุนุฏูู** ุนูู ููู `non_voip_unified.py`
- **ูุง ุชุนุฏูู** ุนูู ุฌุฏุงูู `nonvoip_*`
- **ูุง ุญุฐู** ูุฃู ุฏุงูุฉ ุฃู ูุนุงูุฌ ูุฏูู
- **ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ**: ุชู ุฅูุดุงุก `proxy_bot.db.backup_*`

### โ ุงุณุชููุงููุฉ ุชุงูุฉ ูู SMSPool
- ุฌุฏุงูู ูููุตูุฉ: `smspool_settings`, `smspool_orders`, `smspool_services_cache`
- ูุนุงูุฌุงุช ูููุตูุฉ: ููุท `^sp_`
- ูุง ุชุฏุงุฎู ูุน ุงููุธุงู ุงููุฏูู

## ๐ฏ ุฎุงุฑุทุฉ ุชุฏูู ุงููุณุชุฎุฏู

```
ุงููุณุชุฎุฏู ูุถุบุท "๐ฑ ุฃุฑูุงู Non-VoIP"
              โ
     handle_buy_numbers()
              โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ ูุญุต ุงูุฎุฏูุงุช ุงููุชุงุญุฉ    โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ NonVoip ููุท ููุนูุ      โ โโ ูุนู โโ ูุชุญ NonVoip ูุจุงุดุฑุฉ โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ ูุง
    โโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ SMSPool ููุท ููุนูุ      โ โโ ูุนู โโ ูุชุญ SMSPool ูุจุงุดุฑุฉ โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ ูุง
    โโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ   ุนุฑุถ ูุงุฆูุฉ ุงุฎุชูุงุฑ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโ  โ
    โ  โ ๐บ๐ธ NonVoip      โ  โ โโ ุงุฎุชูุงุฑ NonVoip โโ numbers_service_nonvoip
    โ  โ ๐ SMSPool       โ  โ โโ ุงุฎุชูุงุฑ SMSPool โโ sp_main
    โ  โ ๐ ุฑุฌูุน          โ  โ โโ ุฑุฌูุน โโ main_menu
    โ  โโโโโโโโโโโโโโโโโโโโโ  โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ุฏููู ุงููุณุคูู

### ุฅุนุฏุงุฏ SMSPool (ุฎุทูุฉ ุจุฎุทูุฉ)

#### 1. ุงูุญุตูู ุนูู API Key
```
1. ุฒูุงุฑุฉ: https://www.smspool.net/my/settings
2. ุงูุชุณุฌูู ุฃู ุชุณุฌูู ุงูุฏุฎูู
3. ูุณุฎ API Key (32 ุญุฑู)
```

#### 2. ุฅุถุงูุฉ API Key ููุจูุช
```
1. ูุชุญ ููุญุฉ ุงูุฃุฏูู ูู ุงูุจูุช
2. ุงุฎุชูุงุฑ "๐ฑ ุฅุฏุงุฑุฉ SMSPool (ุฃุฑูุงู SMS)"
3. ุงูุถุบุท ุนูู "๐ ุชุนููู ููุชุงุญ API"
4. ูุตู API Key
5. ุงูุชุฃููุฏ โ
```

#### 3. ุชุนุฏูู ูุณุจุฉ ุงูุฑุจุญ (ุงุฎุชูุงุฑู)
```
1. ูู ูุงุฆูุฉ ุฅุฏุงุฑุฉ SMSPool
2. ุงูุถุบุท ุนูู "๐น ุชุนุฏูู ูุณุจุฉ ุงูุฑุจุญ"
3. ุฅุฏุฎุงู ุงููุณุจุฉ (ูุซุงู: 30 = 30%)
4. ุงูุชุฃููุฏ โ
```

#### 4. ุงูุชุญูู ูู ุชูุนูู ุงูุฎุฏูุฉ
```
ูู ูุงุฆูุฉ ุฅุฏุงุฑุฉ SMSPool:
- ุฒุฑ "โ ุชูุนูู ุงูุฎุฏูุฉ" - ูุชูุนูู SMSPool
- ุฒุฑ "โ ุชุนุทูู ุงูุฎุฏูุฉ" - ูุฅููุงู SMSPool ูุคูุชุงู
```

### ุณููุงุฑูููุงุช ุงูุชุดุบูู

| NonVoip | SMSPool | ุงููุชูุฌุฉ |
|---------|---------|----------|
| โ ููุนู | โ ููุนู | ูุงุฆูุฉ ุงุฎุชูุงุฑ ูููุณุชุฎุฏู |
| โ ููุนู | โ ูุนุทู | ูุชุญ NonVoip ูุจุงุดุฑุฉ |
| โ ูุนุทู | โ ููุนู | ูุชุญ SMSPool ูุจุงุดุฑุฉ |
| โ ูุนุทู | โ ูุนุทู | ุฑุณุงูุฉ "ุงูุฎุฏูุฉ ุบูุฑ ูุชุงุญุฉ" |

## ๐ ูููุฒุงุช SMSPool ูููุณุชุฎุฏููู

### 1. ุชุบุทูุฉ ุนุงูููุฉ ๐
- ุฏุนู ุฌููุน ุงูุฏูู (ููุณ ููุท ุฃูุฑููุง)
- ุฃุณุนุงุฑ ุชูุงูุณูุฉ
- ุชููุฑ ุนุงูู

### 2. ุฎุฏูุงุช ูุชููุนุฉ ๐ฑ
- WhatsApp
- Telegram
- Google
- Facebook
- Instagram
- Twitter/X
- TikTok
- Discord
- ูุฃูุซุฑ...

### 3. ุนูููุฉ ุงูุดุฑุงุก ๐
```
1. ุงุฎุชูุงุฑ ุงูุฏููุฉ (ุจุญุซ inline)
2. ุงุฎุชูุงุฑ ุงูุฎุฏูุฉ (ุจุญุซ inline)
3. ูุฑุงุฌุนุฉ ุงูุณุนุฑ
4. ุชุฃููุฏ ุงูุดุฑุงุก
5. ุงุณุชูุงู ุงูุฑูู ููุฑุงู
6. ุงูุชุธุงุฑ ุงูุฑุณุงูุฉ (ุชุตู ุชููุงุฆูุงู)
```

### 4. ุฅุฏุงุฑุฉ ุงูุฃุฑูุงู ๐
- **ุงูุฃุฑูุงู ุงููุดุทุฉ**: ุนุฑุถ ุฌููุน ุงูุฃุฑูุงู ุงูุญุงููุฉ
- **ูุญุต ุงูุฑุณุงูุฉ**: ูุฏููุงู ุฃู ุชููุงุฆูุงู
- **ุฅุนุงุฏุฉ ุฅุฑุณุงู**: ุทูุจ ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฑุณุงูุฉ
- **ุงูุฅูุบุงุก**: ุฅูุบุงุก ูุงุณุชุฑุฏุงุฏ ุงููุจูุบ
- **ุงูุณุฌู**: ุณุฌู ูุงูู ููุนูููุงุช

## ๐ฐ ูุธุงู ุงูุชุณุนูุฑ

### ุงููุนุงุฏูุฉ:
```
ุงูุณุนุฑ ุงูููุงุฆู = ุณุนุฑ SMSPool + (ุณุนุฑ SMSPool ร ูุณุจุฉ ุงูุฑุจุญ รท 100)
```

### ูุซุงู:
```
ุณุนุฑ SMSPool: $0.50
ูุณุจุฉ ุงูุฑุจุญ: 30%
ุงูุณุนุฑ ุงูููุงุฆู: $0.50 + ($0.50 ร 30 รท 100) = $0.65
```

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

### 1. `bot.py`
**ุงูุชุนุฏููุงุช:**
- ุฏุงูุฉ `handle_buy_numbers()` - ุงูุณุทุฑ ~17033
- ูุนุงูุฌ `numbers_service_nonvoip` - ุงูุณุทุฑ ~6844
- ูุนุงูุฌ `main_menu` - ุงูุณุทุฑ ~6857

**ููุน ุงูุชุนุฏูู:** ุฅุถุงูุฉ ููุท (ูุง ุญุฐู)

### 2. ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ
- `proxy_bot.db.backup_YYYYMMDD_HHMMSS`

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ ูุณุจูุงู โ

#### ุฌุฏุงูู NonVoip (ุจุฏูู ุชุนุฏูู)
- `nonvoip_orders`
- `nonvoip_settings`
- `nonvoip_statistics`
- `nonvoip_price_settings`
- `nonvoip_messages`
- `nonvoip_purchase_logs`
- `nonvoip_renewal_logs`
- `nonvoip_balance_notifications`
- `nonvoip_sent_notifications`

#### ุฌุฏุงูู SMSPool (ูููุตูุฉ ุชูุงูุงู)
```sql
-- ุงูุฅุนุฏุงุฏุงุช
CREATE TABLE smspool_settings (
    id INTEGER PRIMARY KEY DEFAULT 1,
    api_key TEXT,
    enabled INTEGER DEFAULT 1,
    margin_percent REAL DEFAULT 30,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุงูุทูุจุงุช
CREATE TABLE smspool_orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    order_id TEXT NOT NULL UNIQUE,
    number TEXT,
    country TEXT,
    country_id TEXT,
    service TEXT,
    service_id TEXT,
    pool TEXT,
    cost_price REAL DEFAULT 0,
    sale_price REAL DEFAULT 0,
    status TEXT DEFAULT 'pending',
    sms_code TEXT,
    full_sms TEXT,
    expires_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- ุงูุชุฎุฒูู ุงููุคูุช
CREATE TABLE smspool_services_cache (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    service_id TEXT NOT NULL,
    service_name TEXT NOT NULL,
    short_name TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "ุฎุฏูุฉ ุงูุฃุฑูุงู ุบูุฑ ูุชุงุญุฉ"
**ุงูุญู:**
1. ุงูุชุญูู ูู ุชูุนูู ุงูุฎุฏูุฉ ูู ููุญุฉ ุงูุฃุฏูู
2. ุงูุชุญูู ูู ูุฌูุฏ API Key ุตุญูุญ
3. ูุญุต logs ุงูุจูุช

### ุงููุดููุฉ: "ุฎุทุฃ ูู ูุชุญ ุฎุฏูุฉ SMSPool"
**ุงูุญู:**
1. ุงูุชุญูู ูู ุตุญุฉ API Key
2. ุงูุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
3. ูุฑุงุฌุนุฉ `smspool_service.py` ููุชูุงุตูู

### ุงููุดููุฉ: ูุงุฆูุฉ ุงูุงุฎุชูุงุฑ ูุง ุชุธูุฑ
**ุงูุญู:**
1. ุงูุชุฃูุฏ ูู ุชูุนูู ููุง ุงูุฎุฏูุชูู
2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช
3. ูุญุต console ููุฃุฎุทุงุก

## ๐ ููุงุญุธุงุช ูููุฉ

1. **API Key ุขูู**: ูุชู ุชุฎุฒููู ูุดูุฑุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุงูุฑุตูุฏ**: ูุชู ูุญุต ุฑุตูุฏ ุงููุณุชุฎุฏู ูุจู ูู ุนูููุฉ ุดุฑุงุก
3. **ุงูุฃุณุนุงุฑ**: ูุชู ุฌูุจูุง ูุจุงุดุฑุฉ ูู SMSPool API
4. **ุงูุงูุชูุงุก**: ุงูุฃุฑูุงู ุชูุชูู ุจุนุฏ 10 ุฏูุงุฆู ุงูุชุฑุงุถูุงู
5. **ุงูุงุณุชุฑุฏุงุฏ**: ูููู ุฅูุบุงุก ุงูุทูุจ ูุงุณุชุฑุฏุงุฏ ุงููุจูุบ ูุจู ุงุณุชูุงู ุงูุฑุณุงูุฉ

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ูุฎุทุท ูู:
- [ ] ุฅุญุตุงุฆูุงุช SMSPool ูู ููุญุฉ ุงูุฃุฏูู
- [ ] ุชุตุฏูุฑ ุทูุจุงุช SMSPool ุฅูู Excel
- [ ] ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ ุนูุฏ ุงูุฎูุงุถ ุงูุฑุตูุฏ
- [ ] ุฏุนู pools ูุชุนุฏุฏุฉ

### ุบูุฑ ูุฎุทุท ูู (ุญุงููุงู):
- ูุงุฌูุฉ ููุจ ูุฅุฏุงุฑุฉ SMSPool (ููุฌูุฏุฉ ุจุงููุนู ูู web_ui)

## ๐ ุงูุฏุนู ุงูููู

### ูููุทูุฑูู:
- **ุงูููู ุงูุฑุฆูุณู**: `smspool_service.py`
- **ุงูุชูุซูู**: ููุฌูุฏ ุฏุงุฎู ุงูููุฏ
- **Logging**: ูุณุชุฎุฏู `logger` ูู Python

### ูููุณุชุฎุฏููู:
- **ุงูุฏุนู**: ุนุจุฑ ุฒุฑ "๐ ุงูุฏุนู" ูู ุงูุจูุช
- **ุงูุชูุงุตู**: @MohamadZalaf

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [x] ุชุญุฏูุซ `handle_buy_numbers()`
- [x] ุฅุถุงูุฉ ูุนุงูุฌุงุช Callback
- [x] ุงุฎุชุจุงุฑ ุงูุชูุงูู
- [x] ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุชุนุงุฑุถุงุช
- [x] ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ
- [x] ุชูุซูู ุดุงูู
- [x] ุงุฎุชุจุงุฑ Python syntax
- [x] ูุฑุงุฌุนุฉ ุงูุฃูุงู

## ๐ ุงูุชุฑุฎูุต

```
ยฉ 2025 Mohamad Zalaf
ุฌููุน ุงูุญููู ูุญููุธุฉ
```

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2024-02-02  
**ุงูุฅุตุฏุงุฑ:** 1.0.0  
**ุงูุญุงูุฉ:** โ ููุชูู ูุฌุงูุฒ ููุฅูุชุงุฌ  
**ุขุฎุฑ ุชุญุฏูุซ:** 2024-02-02
